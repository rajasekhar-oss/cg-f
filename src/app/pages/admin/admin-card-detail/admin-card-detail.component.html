<div class="admin-card-detail-container">
  <h2>Card Details</h2>
  <div *ngIf="card && !loading" class="card-header" style="display: flex; align-items: center; gap: 24px; margin-bottom: 24px;">
    <img *ngIf="card.imageUrl" [src]="card.imageUrl" [alt]="card.name" class="card-image" style="width: 80px; height: 80px; border-radius: 12px; object-fit: cover; border: 2px solid #e5e7eb;" />
    <div>
      <h3 style="font-size: 1.5rem; font-weight: 600; margin: 0;">{{ card.name }}</h3>
    </div>
  </div>
  <div *ngIf="loading" class="loading">Loading card...</div>
  <div *ngIf="error" class="error">{{error}}</div>
  <form *ngIf="!loading && card" (ngSubmit)="updateCard()" class="card-form">
    <div style="display: flex; flex-direction: column; align-items: center; margin-bottom: 16px;">
  <!-- <div style="color: #888; font-size: 0.95rem; margin-bottom: 4px;">Debug: card.picture = {{ card?.picture }}</div> -->
  <img *ngIf="card.picture" [src]="card.picture" [alt]="card.name" style="width: 100%; max-width: 400px; height: auto; border-radius: 12px; object-fit: cover; border: 2px solid #e5e7eb; margin-bottom: 8px;" />
  <div *ngIf="!card.picture" style="color: #dc2626; font-size: 0.95rem;">No image available for this card.</div>
    </div>
    <label>Name <input [(ngModel)]="dto.name" name="name" required /></label>
    <label>Image
      <input type="file" accept="image/*" (change)="onFileSelected($event)" />
    </label>
    <label>Image URL <input [(ngModel)]="dto.picture" name="picture" required /></label>

    <!-- Film-specific fields -->
    <div *ngIf="!dto.category || dto.category === 'FILM'">
      <label style="text-align: left; font-weight: 500; color: #374151;">Total Films
        <input [(ngModel)]="dto.totalFilms" name="totalFilms" type="number" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
      <label style="text-align: left; font-weight: 500; color: #374151;">Years Active
        <input [(ngModel)]="dto.yearsActive" name="yearsActive" type="number" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
      <label style="text-align: left; font-weight: 500; color: #374151;">Highest Grossing
        <input [(ngModel)]="dto.highestGrossing" name="highestGrossing" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
      <label style="text-align: left; font-weight: 500; color: #374151;">Awards Won
        <input [(ngModel)]="dto.awardsWon" name="awardsWon" type="number" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
      <label style="text-align: left; font-weight: 500; color: #374151;">Followers
        <input [(ngModel)]="dto.followers" name="followers" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
      <label style="text-align: left; font-weight: 500; color: #374151;">Languages (as integer)
        <input [(ngModel)]="dto.languages" name="languages" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
      <label style="text-align: left; font-weight: 500; color: #374151;">Professions (as integer)
        <input [(ngModel)]="dto.professions" name="professions" required style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
      </label>
    </div>

    <!-- Cricket-specific fields -->
    <div *ngIf="dto.category === 'CRICKET'">
      <h3 style="text-align:left; margin:8px 0 4px; color:#111827; font-size:1.1rem;">Cricket Details</h3>
      <div *ngIf="dto.cricketType === 'BAT'">
        <label style="text-align: left; font-weight: 500; color: #374151;">Matches Played
          <input [(ngModel)]="dto.matchesPlayed" name="matchesPlayed" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Total Runs
          <input [(ngModel)]="dto.totalRuns" name="totalRuns" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Highest Score
          <input [(ngModel)]="dto.highestScore" name="highestScore" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Fours Hit
          <input [(ngModel)]="dto.foursHit" name="foursHit" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Sixes Hit
          <input [(ngModel)]="dto.sixesHit" name="sixesHit" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Batting Average
          <input [(ngModel)]="dto.battingAverageBetter" name="battingAverageBetter" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Strike Rate
          <input [(ngModel)]="dto.strikeRateBetter" name="strikeRateBetter" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
      </div>
      <div *ngIf="dto.cricketType === 'BOWL'">
        <label style="text-align: left; font-weight: 500; color: #374151;">Matches Played
          <input [(ngModel)]="dto.matchesPlayed" name="matchesPlayedBow" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Wickets Taken
          <input [(ngModel)]="dto.wicketsTaken" name="wicketsTaken" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Balls Bowled
          <input [(ngModel)]="dto.ballsBowled" name="ballsBowled" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Runs Conceded
          <input [(ngModel)]="dto.runsConceded" name="runsConceded" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Economy Rate
          <input [(ngModel)]="dto.economyRateBetter" name="economyRateBetter" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Best Bowling Match
          <input [(ngModel)]="dto.bestBowlingMatch" name="bestBowlingMatch" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Bowling Average
          <input [(ngModel)]="dto.bowlingAverage" name="bowlingAverage" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
      </div>
      <div *ngIf="dto.cricketType === 'ALL'">
        <label style="text-align: left; font-weight: 500; color: #374151;">Matches Played
          <input [(ngModel)]="dto.matchesPlayed" name="matchesPlayedAll" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Wickets Taken
          <input [(ngModel)]="dto.wicketsTaken" name="wicketsTakenAll" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Total Runs
          <input [(ngModel)]="dto.totalRuns" name="totalRunsAll" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Highest Score
          <input [(ngModel)]="dto.highestScore" name="highestScoreAll" type="number" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Economy Rate
          <input [(ngModel)]="dto.economyRateBetter" name="economyRateBetterAll" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Batting Average
          <input [(ngModel)]="dto.battingAverageBetter" name="battingAverageBetterAll" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
        <label style="text-align: left; font-weight: 500; color: #374151;">Strike Rate
          <input [(ngModel)]="dto.strikeRateBetter" name="strikeRateBetter" type="number" step="0.01" style="margin-top: 4px; padding: 12px; border-radius: 8px; border: 1px solid #d1d5db; font-size: 1rem; width: 100%;" />
        </label>
      </div>
    </div>
    <div class="button-row">
      <button type="submit" class="update-btn">Update</button>
      <button type="button" (click)="deleteCard()" class="delete-btn">Delete</button>
    </div>
  </form>
  <div *ngIf="msg" class="success">{{msg}}</div>
  <div *ngIf="!loading && !card && !error" class="no-data">No card data to display.</div>
</div>
